# Data processing
user_inter_num_interval: '[5,inf)'
item_inter_num_interval: '[5,inf)'
# entity_kg_num_interval: '[30,inf)'
relation_kg_num_interval: '[1,inf)'
kg_reverse_r: True
path_hop_length: 3
MAX_PATHS_PER_USER: 50
path_sample_args:
  collaborative_path: True
  strategy: constrained-rw #metapath
  restrict_by_phase: True
  parallel_max_workers: 0
  MAX_RW_PATHS_PER_HOP: 1
metapaths: ~

path_constraint: [
  [[null, 'user'], ["[UI-Relation]","entity"], ["[UI-Relation]","entity"], ["[UI-Relation]","entity"]],
  [[null, 'user'], ["[UI-Relation]","entity"], ["film.film.prequel","entity"], ["film.film.prequel_r","entity"]],
]

# Training
epochs: 5
train_batch_size: 2048
learner: adam
learning_rate: 0.001
eval_step: 5
stopping_step: 3
enable_amp: True
enable_scaler: True

# Evaluation
eval_batch_size: 64
valid_metric: NDCG@10
valid_metric_bigger: True
metrics: ["Recall", "NDCG", "Precision", "ShannonEntropy", "Novelty", "ItemCoverage"]
eval_args:                      # (dict) 4 keys: group_by, order, split, and mode
  split: {'RS':[0.8,0.1,0.1]}   # (dict) The splitting strategy ranging in ['RS','LS'].
  group_by: user                # (str) The grouping strategy ranging in ['user', 'none'].
  order: RO                     # (str) The ordering strategy ranging in ['RO', 'TO'].
  mode: full                 # (str) The evaluation mode ranging in ['full','unixxx','popxxx','labeled'].

# Model
embedding_size: 64
num_heads: 4
num_layers: 2
sequence_postprocessor: BeamSearch
topk: 10

# Path Generation
path_generation_args:
  paths_per_user: 10
  num_beams: 15
  num_beam_groups: 5
  diversity_penalty: 0.2